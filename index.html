<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Remote Display XR – A-Frame</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      html, body, a-scene {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <a-scene
      embedded
      vr-mode-ui="enabled: true"
      webxr="optionalFeatures: hit-test"
      renderer="colorManagement: true"
      style="background: black;"
    >
      <a-entity camera position="0 1.6 0"></a-entity>

      <a-video
        id="remoteScreen"
        src="#remoteVideo"
        width="2"
        height="1.125"
        position="0 1.6 -1"
        rotation="0 180 0"
        scale="-1 1 1"
        material="side: double"
      ></a-video>
    </a-scene>

    <video
      id="remoteVideo"
      autoplay
      muted
      playsinline
      preload="auto"
      crossorigin="anonymous"
      style="display:none;"
    ></video>

    <script src="receiver.js" type="module"></script>

    <script>
      // Auto‐reload ao salvar index.html
      const socket = new WebSocket(`wss://${location.host}`);
      socket.addEventListener("message", (e) => {
        const d = JSON.parse(e.data);
        if (d.type === "reload") location.reload();
      });
    </script>
  </body>
</html>
